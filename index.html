<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to Webber Web Server</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Keeping the scrollbar styles here as they are specific to pre elements and might not be directly mimicked by simple class conversions. */
      pre {
        overflow-x: auto;
        scrollbar-width: thin;
        scrollbar-color: #a0aec0 #edf2f7;
      }
      pre::-webkit-scrollbar {
        height: 8px;
      }
      pre::-webkit-scrollbar-track {
        background: #edf2f7;
        border-radius: 10px;
      }
      pre::-webkit-scrollbar-thumb {
        background-color: #a0aec0;
        border-radius: 10px;
        border: 2px solid #edf2f7;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <img src="./logo.png" alt="Webber Logo" width="250px" class="logo" />
      <h1 class="main-title">Webber Web Server</h1>
      <p class="description-paragraph">
        This is the default welcome page for your Go-powered Webber web server.
      </p>

      <div class="section-divider">
        <h2 class="section-title mb-4">About Webber</h2>
        <p class="text-gray-700 mb-6 leading-relaxed">
          Webber is a modern, high-performance Go web server inspired by Nginx,
          with support for static file hosting (optimized for Vue.js, React,
          Angular, and other SPA builds), reverse proxying, WebSocket, rate
          limiting, gzip compression, in-memory caching, HTTP/2, and TLS.
        </p>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-6">Features</h2>
        <ul class="feature-list">
          <li>
            <strong class="feature-strong">Logging Middleware:</strong> Logs
            every HTTP request and response time, providing valuable insights
            into server activity.
          </li>
          <li>
            <strong class="feature-strong">Rate Limiting:</strong> Protects
            against abuse by limiting requests per client IP. Configurable via
            <code class="">RateLimitRPS</code> and
            <code class="">RateLimitBurst</code>.
          </li>
          <li>
            <strong class="feature-strong">Gzip Compression:</strong>
            Automatically compresses responses for supported clients,
            significantly reducing bandwidth usage and improving load times.
          </li>
          <li>
            <strong class="feature-strong">URL Rewriting:</strong> Demonstrates
            how to redirect or rewrite URLs (e.g.,
            <code class="">/old/example</code> to
            <code class="">/new/example</code>). Try
            <a href="/old/example" class="link-style">this example</a
            >.
          </li>
          <li>
            <strong class="feature-strong"
              >Reverse Proxy & Load Balancing:</strong
            >
            Distributes incoming requests across multiple backend servers using
            a round-robin strategy, enhancing availability and performance. See
            <a href="/proxy" class="link-style">the proxy endpoint</a
            >.
          </li>
          <li>
            <strong class="feature-strong">WebSocket Support:</strong> Provides
            a dedicated endpoint for real-time, bidirectional communication,
            ideal for interactive applications. Access it at
            <a href="/ws" class="link-style">/ws</a>.
          </li>
          <li>
            <strong class="feature-strong"
              >Static File Serving with Caching:</strong
            >
            Efficiently serves static assets from the configured directory with
            in-memory caching based on
            <code class="">CacheTTLSeconds</code>.
          </li>
          <li>
            <strong class="feature-strong">HTTP/2 and TLS:</strong> Secure and
            high-performance communication enabled by default, ensuring data
            integrity and faster connections.
          </li>
          <li>
            <strong class="feature-strong">SPA Routing Support:</strong>
            Unmatched routes serve
            <code class="">index.html</code> for client-side navigation
            (Vue.js, React, Angular, etc.), crucial for single-page
            applications.
          </li>
        </ul>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-6">Getting Started</h2>
        <p class="text-gray-700 mb-4 text-left leading-relaxed">
          This section will guide you through the initial setup and
          configuration of your Webber web server.
        </p>
        <h3 class="subsection-title text-left">1. Installation</h3>
        <pre><code class="language-bash">sudo ./install.sh</code></pre>
        <p class="text-gray-700 text-left mb-4 leading-relaxed">
          The provided install script automates the setup process, performing
          the following actions:
        </p>
        <ul class="list-disc list-inside max-w-xl text-left text-gray-700 space-y-1 mb-6">
          <li>Clones the repository from GitHub.</li>
          <li>Builds the Go binary for the server.</li>
          <li>
            Copies necessary configuration and static files to their respective
            locations.
          </li>
          <li>
            Sets up the systemd service for easy management and ensures TLS
            certificates are in place.
          </li>
        </ul>

        <h3 class="subsection-title text-left">2. Configuration</h3>
        <p class="text-gray-700 mb-4 leading-relaxed">
          Customize your Webber Web Server by editing the
          <code class="">/etc/webber/config.json</code> file. Here's a detailed
          breakdown of the configurable parameters:
        </p>
        <pre class="white-text"><code class="language-json">{
  "port": "443",           // The port on which the server will listen (e.g., "80" for HTTP, "443" for HTTPS).
  "static_dir": "/var/www/webber", // The directory from which static files (like index.html, JS, CSS, images) will be served.
  "rate_limit_rps": 10.0,    // The maximum number of requests per second allowed per client IP address.
  "rate_limit_burst": 20,    // The maximum burst capacity for the rate limiter, allowing temporary spikes in requests.
  "cache_ttl_seconds": 300,  // The time-to-live (TTL) for static file cache entries, in seconds.
  "certFile": "cert.pem",    // Path to your TLS certificate file (automatically generated by install.sh if not present).
  "keyFile": "key.pem",      // Path to your TLS key file (automatically generated by install.sh if not present).
  "debug": false             // Set to true for more verbose logging, false for production environments.
}</code></pre>
      </div>

      <div class="section-divider">
        <h2 class="section-title text-left mb-6">
          3. Deploy an SPA (Vue.js, React, Angular)
        </h2>

        <h3 class="subsection-title text-left">Vue.js</h3>
        <p class="text-gray-700 mb-2 text-left">1. Build your Vue.js project:</p>
        <pre><code class="language-bash">npm run build</code></pre>
        <p class="text-gray-700 mb-2 text-left">
          2. Copy the contents of the <code class="">dist/</code> folder to
          <code class="">/var/www/webber</code>:
        </p>
        <pre><code class="language-bash">sudo cp -r dist/* /var/www/webber/
sudo chown -R webber:webber /var/www/webber
sudo chmod -R 755 /var/www/webber</code></pre>
        <p class="text-gray-700 mb-2 text-left">3. Restart Webber to apply changes:</p>
        <pre><code class="language-bash">sudo systemctl restart webber</code></pre>
        <p class="text-gray-700 mb-8 text-left">
          4. Visit <a href="https://localhost/" class="link-style"
            >https://localhost/</a
          >
          to see your Vue app in action.
        </p>

        <h3 class="subsection-title text-left">React</h3>
        <p class="text-gray-700 mb-2 text-left">1. Build your React project:</p>
        <pre><code class="language-bash">npm run build</code></pre>
        <p class="text-gray-700 mb-2 text-left">
          2. Copy the contents of the <code class="">build/</code> folder to
          <code class="">/var/www/webber</code>:
        </p>
        <pre><code class="language-bash">sudo cp -r build/* /var/www/webber/
sudo chown -R webber:webber /var/www/webber
sudo chmod -R 755 /var/www/webber</code></pre>
        <p class="text-gray-700 mb-2 text-left">3. Restart Webber to apply changes:</p>
        <pre><code class="language-bash">sudo systemctl restart webber</code></pre>
        <p class="text-gray-700 mb-8 text-left">
          4. Visit <a href="https://localhost/" class="link-style"
            >https://localhost/</a
          >
          to see your React app in action.
        </p>

        <h3 class="subsection-title text-left">Angular</h3>
        <p class="text-gray-700 mb-2 text-left">1. Build your Angular project:</p>
        <pre><code class="language-bash">ng build --prod</code></pre>
        <p class="text-gray-700 mb-2 text-left">
          2. Copy the contents of the
          <code class="">dist/&lt;project-name&gt;/</code> folder to
          <code class="">/var/www/webber</code>:
        </p>
        <pre><code class="language-bash">sudo cp -r dist/&lt;project-name&gt;/* /var/www/webber/
sudo chown -R webber:webber /var/www/webber
sudo chmod -R 755 /var/www/webber</code></pre>
        <p class="text-gray-700 mb-2 text-left">3. Restart Webber to apply changes:</p>
        <pre><code class="language-bash">sudo systemctl restart webber</code></pre>
        <p class="text-gray-700 mb-8 text-left">
          4. Visit <a href="https://localhost/" class="link-style"
            >https://localhost/</a
          >
          to see your Angular app in action.
        </p>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-4">Default Welcome Page</h2>
        <p class="text-gray-700 mb-6 leading-relaxed">
          The current
          <code class="">index.html</code>
          you are viewing serves as a comprehensive demonstration of Webber's
          features and configuration options. To deploy your own single-page
          application, simply replace this file with your SPA's build output as
          detailed in the deployment instructions above.
        </p>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-4">Static File MIME Types</h2>
        <p class="text-gray-700 mb-6 leading-relaxed">
          Webber automatically provides correct MIME types for all common static
          assets, including CSS, JavaScript, fonts, SVG, and more. This ensures
          seamless compatibility and optimal performance for modern frontend
          builds.
        </p>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-4">TLS Certificates</h2>
        <p class="text-gray-700 mb-6 leading-relaxed">
          The <code class="">install.sh</code> script conveniently generates
          self-signed certificates for immediate use if no custom certificates
          are provided. For production environments, it is highly recommended
          to replace the default certificates located at
          <code class="">/etc/webber/cert.pem</code> and
          <code class="">/etc/webber/key.pem</code> with your own trusted TLS
          certificates.
        </p>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-4">Service Management</h2>
        <p class="text-gray-700 mb-4 leading-relaxed">
          Manage the Webber service using standard systemd commands:
        </p>
        <pre><code class="language-bash">sudo systemctl status webber    # Check the status of the Webber service
sudo systemctl restart webber   # Restart the Webber service to apply configuration changes
sudo journalctl -u webber       # View the logs for the Webber service</code></pre>
      </div>

      <div class="section-divider">
        <h2 class="section-title mb-4">Contributing</h2>
        <p class="text-gray-700 mb-6 leading-relaxed">
          Contributions, bug reports, and feature requests are highly welcome!
          Please feel free to open a Pull Request (PR) or submit an issue on
          the GitHub repository.
        </p>
      </div>

      <p class="footer-text">
        Built in Eswatini with ❤️ by
        <a href="https://github.com/ElectronSz" class="link-style"
          >ElectronSz</a
        >.
      </p>
    </div>
  </body>
</html>
